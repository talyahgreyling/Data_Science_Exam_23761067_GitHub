---
title: "Famous for Forever: an Analysis on Coldplay and Metallica Data"
author: "Talyah Greyling"
date: "`r Sys.Date()`"
bibliography: Tex/ref.bib       
output:
  pagedown::html_paged:
    # template: wp_paged.html
    # css: ['wp.css', 'wp-fonts.css', 'wp-page.css']
    css: ["Template/default-fonts-Texevier.css", "Template/default-page-Texevier.css", "Template/default-Texevier.css"]
    csl: Template/harvard-stellenbosch-university.csl # referencing format used.
    template: ["Template/paged-Texevier.html"]

    toc: true 
    # change to true for a self-contained document, but it'll be a litte slower for Pandoc to render
    self_contained: TRUE
    
abstract: |
    This report contains an analysis on Coldplay and Metallica using data supplied by Spotify to uncover in the fame achieved by these 2 famous band truely is forever. 
    Focusing on their studio recordings, it explores key aspects such as album characteristics, industry trends, and the distinction between live and studio performances. The report presents statistical tables and visualizations to provide insights into the longevity and musical progression of these iconic bands.  

---


```{r setup, include=FALSE}

# Housekeeping 
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE, fig.width = 6, fig.height = 5, fig.pos = 'H') # set chunk defaults 
rm(list = ls()) # clear environment 
options(scipen = 999) #suppress scientific notation
options(dplyr.summarise.inform=F) # suppress messages 

# Load neccessary libraries 
pacman::p_load(dplyr, ggplot2, tidyverse, stringr, purrr, lubridate) ############## update 

# Source all existing functions 
list.files('..//Question1/code/', full.names = T, recursive = T) %>% as.list() %>% walk(~source(.))
list.files('code/', full.names = T, recursive = T) %>% as.list() %>% walk(~source(.))

# Set theme & colour palette
palette <- c("#3A7370", "#FB9072", "#FFC57B", "#CE677A", "#163940", "#2C1F2C")
theme <- set_custom_theme()

# Load data
location <- "data/Coldplay_vs_Metallica/" # set up directory path to data 
df_metallica <- read_csv(glue::glue("{location}metallica.csv")) # read in csv file
df_coldplay <- read_csv(glue::glue("{location}Coldplay.csv")) 
df_spotify <- read_rds(glue::glue("{location}Broader_Spotify_Info.rds")) # read in rds file
df_billboard_100 <- read_rds(glue::glue("{location}charts.rds"))
 
```

# Introduction 

Metallica is a pioneering American heavy metal band known for fast tempo's, instrumentals and aggressive musicianship. Their breakthrough came with their 3rd album: 'Master of Puppets' (1986), described as one of the heaviest metal albums and named their best work.'...And Justice for All' (1988) earned their first Grammy nod, while Metallica (1991) marked a mainstream shift from their thrash metal roots, becoming their best-selling album (16M+ U.S. copies). After genre experimentation, they returned to thrash with 'Death Magnetic' (2008). Their latest release is '72 Seasons' (2023) [@wiki:metallica]. 

Coldplay, a British rock band renowned for their live performances, have sold over 100 million albums worldwide. Their debut album, 'Parachutes' (2000), featuring "Yellow," won a Brit Award and a Grammy. The follow-up, 'A Rush of Blood to the Head' (2002), repeated this success, while 'X&Y' (2005) completed what they called a trilogy. 'Viva la Vida or Death and All His Friends' (2008) also earned a Grammy, topping charts in over 30 countries. Later albums, 'Mylo Xyloto' (2011), 'Ghost Stories' (2014), 'A Head Full of Dreams' (2015), 'Everyday Life' (2019), 'Music of the Spheres' (2021), and 'Moon Music' (2024), explored genres like electronica, R&B, disco, and progressive rock [@wiki:coldplay].

```{r formatting data}

# Merge datasets
df_metallica <- df_metallica %>% 
    mutate(band = "Metallica")

df_coldplay <- df_coldplay %>% 
    mutate(band = "Coldplay")

df_combined <- df_metallica %>% 
    full_join(df_coldplay, by = "name")

df_combined <- df_combined %>% 
    mutate(duration = map2(duration_ms, duration, convert_duration))

# Remove song duplicates 
duplicate_words <- c("Remastered", "Remix","Rerecorded", "Re-recorded", "Deluxe", "Live", "Edit", "Edition", "Prospekt")

df_combined_unique <- df_combined %>%
    filter(is.na(name) | map_lgl(name, no_duplicate_words)) %>% 
    filter(is.na(album) | map_lgl(album, no_duplicate_words)) %>% 
    filter(is.na(album_name) | map_lgl(album_name, no_duplicate_words))

# Format dates
df_combined_unique <- df_combined_unique %>%
    mutate(month_year = floor_date(as.Date(release_date.x), "month")) %>% 
    mutate(month_year = floor_date(as.Date(release_date.y), "month"))

# GOAL: Calculate days since first album release 
calculate_days_since_first_release <- function(df) {
  df <- df %>%
    group_by(band) %>%
    mutate(first_release_date = min(min(release_date.x), min(release_date.y)),
           days_since_first_release_metallica = as.integer(release_date.x - first_release_date),
           days_since_first_release_metallica = as.integer(release_date.x - first_release_date))
  
  return(df)
}    
 
# GOAL: Indicate if song was performed live 
performed_live <- function(name) {
  return(str_detect(name, regex("Live", ignore_case = TRUE)))
}   

```

```{r}

```
  






